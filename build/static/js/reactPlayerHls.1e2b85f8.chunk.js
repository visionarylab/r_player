/*! For license information please see reactPlayerHls.1e2b85f8.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_typescript=self.webpackChunkreact_typescript||[]).push([[262],{890(t,e,i){i.r(e),i.d(e,{default:()=>k});var n=i(379),s=i(43),a=i(986),o=i(790),r=i(149),l=i(705),c=i(558),d=i(458),u=i(562),h=i(68),p=i(560),v=i(788);const f=["src"],m=(t=>{var e,i,s,h,p;return i=new WeakMap,s=new WeakMap,h=new WeakSet,p=new WeakMap,e=class extends t{constructor(){super(),(0,o.A)(this,h),(0,r.A)(this,i,null),(0,r.A)(this,s,null),(0,r.A)(this,p,()=>{var t,e,i;(null==(t=this.nativeEl)?void 0:t.webkitCurrentPlaybackTargetIsWireless)?null==(e=this.api)||e.stopLoad():null==(i=this.api)||i.startLoad()}),(0,u.A)(h,this,E).call(this,"config")}get config(){return(0,d.A)(s,this)}set config(t){(0,c.A)(s,this,t)}attributeChangedCallback(t,e,i){"src"!==t&&super.attributeChangedCallback(t,e,i),"src"===t&&e!=i&&this.load()}async load(){var t,e;const a=!this.api;if((0,u.A)(h,this,m).call(this),this.src){if(a&&!(0,d.A)(s,this)&&(0,c.A)(s,this,JSON.parse((null==(t=this.shadowRoot.getElementById("config"))?void 0:t.textContent)||"{}")),v.Ay.isSupported()){switch(await Promise.resolve(),this.api=new v.Ay((0,n.A)({liveDurationInfinity:!0,autoStartLoad:!1},this.config)),this.api.loadSource(this.src),this.api.attachMedia(this.nativeEl),this.nativeEl.preload){case"none":{const t=()=>this.api.startLoad();this.nativeEl.addEventListener("play",t,{once:!0}),this.api.on(v.Ay.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",t)});break}case"metadata":{const t=this.api.config.maxBufferLength,e=this.api.config.maxBufferSize;this.api.config.maxBufferLength=1,this.api.config.maxBufferSize=1;const i=()=>{this.api.config.maxBufferLength=t,this.api.config.maxBufferSize=e};this.nativeEl.addEventListener("play",i,{once:!0}),this.api.on(v.Ay.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",i)}),this.api.startLoad();break}default:this.api.startLoad()}this.nativeEl.webkitCurrentPlaybackTargetIsWireless&&this.api.stopLoad(),this.nativeEl.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(0,d.A)(p,this)),(0,c.A)(i,this,document.createElement("source")),(0,d.A)(i,this).setAttribute("type","application/x-mpegURL"),(0,d.A)(i,this).setAttribute("src",this.src),this.nativeEl.disableRemotePlayback=!1,this.nativeEl.append((0,d.A)(i,this));const t=new WeakMap;this.api.on(v.Ay.Events.MANIFEST_PARSED,(e,i)=>{this.nativeEl.autoplay&&this.nativeEl.paused&&this.nativeEl.play().catch(t=>{console.warn("Autoplay failed:",t)}),o();let n=this.videoTracks.getTrackById("main");n||(n=this.addVideoTrack("main"),n.id="main",n.selected=!0);for(const[s,a]of i.levels.entries()){const e=n.addRendition(a.url[0],a.width,a.height,a.videoCodec,a.bitrate);t.set(a,"".concat(s)),e.id="".concat(s)}for(let[t,s]of i.audioTracks.entries()){const e=s.default?"main":"alternative",i=this.addAudioTrack(e,s.name,s.lang);i.id="".concat(t),s.default&&(i.enabled=!0)}}),this.audioTracks.addEventListener("change",()=>{var t;const e=+(null==(t=[...this.audioTracks].find(t=>t.enabled))?void 0:t.id),i=this.api.audioTracks.map(t=>t.id);e!=this.api.audioTrack&&i.includes(e)&&(this.api.audioTrack=e)}),this.api.on(v.Ay.Events.LEVELS_UPDATED,(e,i)=>{var n;const s=this.videoTracks[null!==(n=this.videoTracks.selectedIndex)&&void 0!==n?n:0];if(!s)return;const a=i.levels.map(e=>t.get(e));for(const t of this.videoRenditions)t.id&&!a.includes(t.id)&&s.removeRendition(t)});let s=null;this.api.on(v.Ay.Events.ERROR,(t,e)=>{e.type===v.Ay.ErrorTypes.NETWORK_ERROR&&e.details===v.Ay.ErrorDetails.FRAG_LOAD_ERROR&&(s=e.frag.level)}),this.api.on(v.Ay.Events.LEVEL_SWITCHED,(t,e)=>{const i=e.level;null!==s&&i<s&&(console.warn("\u26a0\ufe0f hls.js downgraded quality from level ".concat(s," to ").concat(i," due to fragment load failure.")),this.videoRenditions.selectedIndex=i,s=null)});const a=t=>{const e=t.target.selectedIndex;e!=this.api.nextLevel&&(this.api.nextLevel=e)};null==(e=this.videoRenditions)||e.addEventListener("change",a);const o=()=>{for(const t of this.videoTracks)this.removeVideoTrack(t);for(const t of this.audioTracks)this.removeAudioTrack(t)};return void this.api.once(v.Ay.Events.DESTROYING,o)}await Promise.resolve(),this.nativeEl.canPlayType("application/vnd.apple.mpegurl")&&(this.nativeEl.src=this.src)}}},(0,l.A)(e,"shadowRootOptions",(0,n.A)({},t.shadowRootOptions)),(0,l.A)(e,"getTemplateHTML",function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{src:n}=e,s=(0,a.A)(e,f);return'\n        <script type="application/json" id="config">\n          '.concat(JSON.stringify(i.config||{}),"\n        <\/script>\n        ").concat(t.getTemplateHTML(s),"\n      ")}),e;function m(){var t,e;null==(t=(0,d.A)(i,this))||t.remove(),null==(e=this.nativeEl)||e.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",(0,d.A)(p,this)),this.api&&(this.api.detachMedia(),this.api.destroy(),this.api=null)}function E(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}})((0,p.u6)(h.lB));globalThis.customElements&&!globalThis.customElements.get("hls-video")&&globalThis.customElements.define("hls-video",m);var E=m,y=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),g={className:"class",htmlFor:"for"};function A(t){return t.toLowerCase()}function T(t){return"boolean"===typeof t?t?"":void 0:"function"===typeof t||"object"===typeof t&&null!==t?void 0:t}function b(t,e,i){var n,s;t[e]=i,null==i&&e in(null!==(n=null==(s=globalThis.HTMLElement)?void 0:s.prototype)&&void 0!==n?n:{})&&t.removeAttribute(e)}var k=function(t){let{react:e,tagName:i,elementClass:s,events:a,displayName:o,defaultProps:r,toAttributeName:l=A,toAttributeValue:c=T}=t;const d=Number.parseInt(e.version)>=19,u=e.forwardRef((t,o)=>{var u,h;const p=e.useRef(null),v=e.useRef(new Map),f={},m={},E={},A={};for(const[e,i]of Object.entries(t)){var k,w;if(y.has(e)){E[e]=i;continue}const t=l(null!==(k=g[e])&&void 0!==k?k:e);if(s.prototype&&e in s.prototype&&!(e in(null!==(w=null==(u=globalThis.HTMLElement)?void 0:u.prototype)&&void 0!==w?w:{}))&&!(null==(h=s.observedAttributes)?void 0:h.some(e=>e===t))){A[e]=i;continue}if(e.startsWith("on")){f[e]=i;continue}const n=c(i);if(t&&null!=n&&(m[t]=String(n),d||(E[t]=n)),t&&d){const e=T(i);E[t]=n!==e?n:i}}if("undefined"!==typeof window){for(const t in f){var L;const i=f[t],n=t.endsWith("Capture"),s=(null!==(L=null==a?void 0:a[t])&&void 0!==L?L:t.slice(2).toLowerCase()).slice(0,n?-7:void 0);e.useLayoutEffect(()=>{const t=null==p?void 0:p.current;if(t&&"function"===typeof i)return t.addEventListener(s,i,n),()=>{t.removeEventListener(s,i,n)}},[null==p?void 0:p.current,i])}e.useLayoutEffect(()=>{if(null===p.current)return;const t=new Map;for(const e in A)b(p.current,e,A[e]),v.current.delete(e),t.set(e,A[e]);for(const[e,i]of v.current)b(p.current,e,void 0);v.current=t})}if("undefined"===typeof window&&(null==s?void 0:s.getTemplateHTML)&&(null==s?void 0:s.shadowRootOptions)){const{mode:i,delegatesFocus:n}=s.shadowRootOptions,a=e.createElement("template",{shadowrootmode:i,shadowrootdelegatesfocus:n,dangerouslySetInnerHTML:{__html:s.getTemplateHTML(m,t)},key:"ce-la-react-ssr-template-shadow-root"});E.children=[a,E.children]}return e.createElement(i,(0,n.A)((0,n.A)((0,n.A)({},r),E),{},{ref:e.useCallback(t=>{p.current=t,"function"===typeof o?o(t):null!==o&&(o.current=t)},[o])}),E.children)});return u.displayName=null!==o&&void 0!==o?o:s.name,u}({react:s,tagName:"hls-video",elementClass:E,toAttributeName:t=>"muted"===t?"":"defaultMuted"===t?"muted":A(t)})}}]);
//# sourceMappingURL=reactPlayerHls.1e2b85f8.chunk.js.map